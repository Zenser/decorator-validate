/*!
* decorator-validate.js v0.1.0
* (c) 2018 张帅
* Released under the MIT License.
*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["decorator-validate"]={})}(this,function(e){"use strict";function o(t){if(t&&t.__rules){var n=Object.assign({},t.__rules);return Object.keys(t).forEach(function(e){n[e]=o(t[e])||n[e]}),n}}var t=/^(\+?0?86-?)?1[3456789]\d{9}$/,n=/^(0[0-9]{2,3}-)?([1-9][0-9]{6,7})+(-[0-9]{1,4})?$/;var i={cnmobile:function(e){return t.test(e)},cnname:function(e){return/^[*\u4E00-\u9FA5]{1,8}(?:[·•]{1}[\u4E00-\u9FA5]{2,10})*$/.test(e)},fixedtel:function(e){return n.test(e)},bankcard:function(e){var t=(e=(""+e).replace(/\s/gi,"")).length;if(!/\d+/.test(e)||t<9)return!1;e=e.split("");for(var n=parseInt(e[t-1]),r=0,o=t-2,i=0;0<=o;o--,i++){var u=parseInt(e[o]);i%2==0&&(u*=2,u=parseInt(u/10)+parseInt(u%10)),r+=parseInt(u)}return(r+n)%10==0},idCard:function(e){if(/^\d{17}[0-9xX]$/.test(e)){for(var t="1,0,x,9,8,7,6,5,4,3,2".split(","),n="7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2".split(","),r=e.toLowerCase().split(""),o=0,i=0;i<17;i++)o+=n[i]*r[i];return t[o%11]===r[17]}},limit:function(e,t){var n=t.min,r=t.max,o="string"==typeof e?e&&e.length:e;return!(void 0!==n&&o<n||void 0!==r&&r<o)}},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function c(f,a){return Array.isArray(f)&&f.length?f.slice(1).reduce(function(e,t){return e.then(function(){return u(t,a)})},u(f[0],a)):"object"===(void 0===f?"undefined":r(f))&&null!==f?new Promise(function(e,t){var n=Object.keys(f),r=[],o=0,i=n.length;function u(){++o===i&&(r.length?t(r):e())}n.forEach(function(e){c(f[e],a[e]).then(u).catch(function(e){r.push(e),u()})})}):Promise.resolve()}function u(e,t){var n=void 0,r=Object.assign({value:t},e);if(e.required&&(null==t||""===t||Array.isArray(t)&&!t.length))n=!1;else if(e.fn)if("string"==typeof e.fn){var o=e.fn;if(!(o in i))throw new Error("not define "+o+" in validator");n=i[o](t,r)}else n=e.fn(t,r);else n=!0;return"function"==typeof n.then?n:n?Promise.resolve():Promise.reject(r)}var f={};["required"].concat(Object.keys(i)).forEach(function(e){var t={};"required"===e?t.required=!0:t.fn=i[e],f[e]=l(t)});var a={message:"valid fail",fn:function(){return!0}};function l(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a;return function(e){return"string"==typeof e?r.message=e||"valid fail":Object.assign(r,e),function(e,t,n){e.__rules||(Object.defineProperty(e,"__rules",{enumerable:!1,configurable:!1,writable:!1,value:Object.create(null)}),Object.defineProperty(e,"$validate",{enumerable:!1,configurable:!1,writable:!1,value:function(){return c(o(e),e)}})),e.__rules[t]?e.__rules[t].push(r):e.__rules[t]=[r]}}}e.validate=function(){var e=arguments.length<=0?void 0:arguments[0];return 1<arguments.length?c.apply(void 0,arguments):(console.log(o(e)),c(o(e),e))},e.decorators=f,e.createDecorator=l,Object.defineProperty(e,"__esModule",{value:!0})});